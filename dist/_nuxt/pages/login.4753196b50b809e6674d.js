webpackJsonp([16],{"2ZWN":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("br"),s("br"),s("v-container",[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm8:"",md7:"",lg5:"","offset-sm3":"","offset-md3":"","offset-lg4":""}},[s("v-card",[s("v-card-text",[s("h6",{staticClass:"red--text"},[e._v("เข้าสู่ระบบ")]),s("p",{staticStyle:{display:"inline"}},[e._v("ยังไม่ได้ลงทะเบียนกับเรา?")]),e._v(" "),s("nuxt-link",{attrs:{to:"/register"}},[e._v("ลงทะเบียน")]),s("br"),s("br"),s("hr"),s("br"),s("v-text-field",{attrs:{label:"ชื่อผุ้ใช้"},model:{value:e.user_name,callback:function(t){e.user_name=t},expression:"user_name"}}),s("v-text-field",{attrs:{type:"password",label:"รหัสผ่าน"},model:{value:e.user_pass,callback:function(t){e.user_pass=t},expression:"user_pass"}}),s("v-btn",{attrs:{primary:"",disabled:!e.isValid,block:""},nativeOn:{click:function(t){e.login(t)}}},[e._v("เข้าสู่ระบบ")])],1)],1)],1)],1)],1)],1)},r=[],n={render:a,staticRenderFns:r};t.a=n},bIR0:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("qT+s"),r=s("2ZWN"),n=s("VU/8"),i=n(a.a,r.a,!1,null,null,null);t.default=i.exports},"qT+s":function(e,t,s){"use strict";var a=s("Xxa5"),r=s.n(a),n=s("exGp"),i=s.n(n),c=s("mtWM"),u=s.n(c);t.a={data:function(){return{user_name:"",user_pass:""}},computed:{isValid:function(){return""!==this.user_name&&""!==this.user_pass}},methods:{login:function(){function e(){return t.apply(this,arguments)}var t=i()(r.a.mark(function e(){var t,s=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,u.a.get("https://localhost:4000/api/get_check_password/"+this.user_name+"/"+this.user_pass).then(function(e){var a=e.data[0];1==a.check_pass?t=a.user_id:(window.alert("รหัสผิดพลาด"),s.user_name="",s.user_pass="")});case 3:null!=t&&u.a.get("https://localhost:4000/api/user/"+t).then(function(e){var a=e.data[0];s.$store.commit("addUserData",a),s.$store.commit("setIsLogin",!0),console.log("user_iduser_id: "+t),s.$socket.emit("join",t),s.$router.push("/home")});case 4:case"end":return e.stop()}},e,this)}));return e}()}}}});
//# sourceMappingURL=login.4753196b50b809e6674d.js.map