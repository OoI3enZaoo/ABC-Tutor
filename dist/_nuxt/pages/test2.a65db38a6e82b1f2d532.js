webpackJsonp([13],{"8+ex":function(e,n,i){"use strict";var t=null;n.a={data:function(){return{applicationServerPublicKey:"BI_RiXwW6riXTA0VJi_Iqbqy-R8Hx9dtq-KxMpekAZK9Eu6b6UIJo6PqIZenj6uu8XtRkNrNwBibfqL2JsCtK6Q",isSubscribed:!1}},created:function(){},mounted:function(){navigator.serviceWorker.register("index.vue").then(function(e){console.log("Service Worker is registered",e),t=e}),"serviceWorker"in navigator&&"PushManager"in window?(console.log("Service Worker and Push is supported"),navigator.serviceWorker.register("index.vue").then(function(e){console.log("Service Worker is registered",e),t=e}).catch(function(e){console.error("Service Worker Error",e)})):(console.warn("Push messaging is not supported"),pushButton.textContent="Push Not Supported"),navigator.serviceWorker.ready.then(function(e){console.log("dfdf"),e.pushManager.getSubscription().then(function(e){console.log("dfdf")})})},methods:{urlB64ToUint8Array:function(e){for(var n="=".repeat((4-e.length%4)%4),i=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(i),s=new Uint8Array(t.length),r=0;r<t.length;++r)s[r]=t.charCodeAt(r);return s},initializeUI:function(){t.pushManager.getSubscription().then(function(e){this.isSubscribed=!(null===e),this.isSubscribed?console.log("User IS subscribed."):console.log("User is NOT subscribed."),this.updateBtn()})},pushButton:function(){this.$refs.pB.disabled=!0,this.isSubscribed?this.unsubscribeUser():this.subscribeUser()},updateBtn:function(){if("denied"===Notification.permission)return this.$refs.pB.textContent="Push Messaging Blocked.",this.$refs.pB.disabled=!0,void this.updateSubscriptionOnServer(null);this.isSubscribed?this.$refs.pB.textContent="Disable Push Messaging":this.$refs.pB.textContent="Enable Push Messaging",this.$refs.pB.disabled=!1},subscribeUser:function(){var e=this.urlB64ToUint8Array(this.applicationServerPublicKey);t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(e){console.log("User is subscribed."),this.updateSubscriptionOnServer(e),this.isSubscribed=!0,this.updateBtn()}).catch(function(e){console.log("Failed to subscribe the user: ",e),this.updateBtn()})},unsubscribeUser:function(){t.pushManager.getSubscription().then(function(e){if(e)return e.unsubscribe()}).catch(function(e){console.log("Error unsubscribing",e)}).then(function(){this.updateSubscriptionOnServer(null),console.log("User is unsubscribed."),this.isSubscribed=!1,updateBtn()})},updateSubscriptionOnServer:function(e){}}}},N9eb:function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=i("8+ex"),s=i("ajzm"),r=i("VU/8"),o=r(t.a,s.a,!1,null,null,null);n.default=o.exports},ajzm:function(e,n,i){"use strict";var t=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("v-btn",{ref:"pB",nativeOn:{click:function(n){e.pushButton(n)}}})],1)},s=[],r={render:t,staticRenderFns:s};n.a=r}});
//# sourceMappingURL=test2.a65db38a6e82b1f2d532.js.map